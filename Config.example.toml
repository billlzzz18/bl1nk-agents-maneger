# Gemini MCP Proxy Configuration
# Save this as: ~/.config/gemini-mcp-proxy/config.toml

[server]
host = "127.0.0.1"
port = 3000
max_concurrent_tasks = 5

[main_agent]
name = "gemini"
type = "gemini-cli"
# Session token location (ACP style)
session_token_path = "~/.config/gemini-cli/session.json"

# Sub-agents configuration
# แต่ละคนปรับแต่งตามงบประมาณและ skill ที่ติดตั้ง
[[agents]]
id = "qwen-coder"
name = "Qwen Code Assistant"
type = "cli"
command = "qwencode"
args = ["--mode", "agent"]
rate_limit = { requests_per_minute = 60, requests_per_day = 2000 }
capabilities = ["code-generation", "refactoring", "debugging"]
priority = 1  # Higher number = higher priority

[[agents]]
id = "codex-helper"
name = "Codex Helper"
type = "cli"
command = "codex"
args = ["--interactive"]
rate_limit = { requests_per_minute = 60, requests_per_day = 2000 }
capabilities = ["code-completion", "documentation"]
priority = 2

[[agents]]
id = "kilo-code"
name = "Kilo Code"
type = "cli"
command = "kilocode"
rate_limit = { requests_per_minute = 60, requests_per_day = 2000 }
capabilities = ["background-tasks", "npm-install", "build"]
priority = 3

# Gemini CLI Extensions (ถ้ามี)
[[agents]]
id = "jules-agent"
name = "Jules Extension"
type = "gemini-extension"
extension_name = "jules"
capabilities = ["research", "analysis"]
priority = 2

[[agents]]
id = "notebooklm"
name = "NotebookLM"
type = "gemini-extension"
extension_name = "notebooklm"
capabilities = ["documentation", "learning"]
priority = 3

# Task routing rules (inspired by oh-my-opencode)
[routing]
# Rules for delegating tasks to sub-agents
[[routing.rules]]
task_type = "background-task"
keywords = ["npm install", "build", "compile", "download"]
preferred_agents = ["kilo-code", "qwen-coder"]

[[routing.rules]]
task_type = "code-generation"
keywords = ["write code", "implement", "create function"]
preferred_agents = ["qwen-coder", "codex-helper"]

[[routing.rules]]
task_type = "research"
keywords = ["search", "find", "lookup", "documentation"]
preferred_agents = ["jules-agent", "notebooklm"]

# Rate limiting strategy
[rate_limiting]
strategy = "round-robin"  # or "priority", "least-used"
track_usage = true
usage_db_path = "~/.config/gemini-mcp-proxy/usage.db"

# Logging
[logging]
level = "info"  # trace, debug, info, warn, error
output = "stdout"  # or file path